# Backend

## About backend

Overload.js mainly uses C++17 as backend. Backend is divided on three folders:

- `api/`
- `examples/`
- `preview/`

### API

Folder `api` contains all necessary libraries, overload.js headers and other necessary stuff. Usually, you do **not** need to touch something there.

### Examples

Folder `examples` contains simple example of production application using overload.js.

### Preview

Folder `preview` contains an application that we call **preview**. It's app that is used in development time. Main difference between **preview** and examples is live reload built-in **preview**. It means that if you change some frontend file, you don't need to restart or reload your application to see changes. Changes will be seen as soon as you save file you are changing. Also **preview** can be used with dev server together. To do this, you need to change config generated by cmake for this app. In `layout.json` you need to change the following lines
```
{
    "type": "file",
    "path": "/path/to/file.html"
}
```
With
```
{
    "type": "url",
    "path": "http://localhost:8080/"
}
```
This file contains configuration for live reload. There's 3 types of paths/urls you can use and provide. First type is `file`. If you provide path to file, then this file will be used as frontend. Second type is `url`. If you provide url, then webview will navigate to this url and show it as frontend. Last type that you can provide in `layout.json` is `folder`. Path to folder is path that will be watched recursively for changes. If some changes in this folder occur, frontend will be reloaded automatically. 
#### IMPORTANT
You can't provide `file` and `url` at the same time. This will cause undefined behaviour and only one of them will be able to work.
## Compilation

Compilation can be done using `CMakeLists.txt` provided in root directory of this repository. Use these commands in root directory to compile this project:

### Linux & MacOS
On Linux, you need `webkit2gtk-4.0` to compile this project. On MacOS, you need working XCode environment with `clang` or `g++` compiler. If you already have installed all dependencies, then this is how you can compile this framework:
```
mkdir build
cd build
cmake ..
make -j4
```
### Windows
On Windows, Visual Studio 2022 and above are supported. You also need `nuget` package manager set in `$PATH` environment:
```
mkdir build
cd build
cmake ..
msbuild overload_js.sln -m /property:Configuration=Release
```
Congratulations! You've built overload.js.
